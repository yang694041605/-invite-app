# 共振分析模块说明

## 概述

共振分析模块是福彩3D智能预测系统的核心模块之一，位于"数据输入"之后，"智能预测"之前。该模块通过多周期数据分析、共振模式识别、号码推荐和组合方案生成等功能，为用户提供高胜率的号码预测。

## 工作流程

共振分析模块的工作流程包括以下几个关键步骤：

1. **数据确认导入**：接收从数据输入模块导入的历史开奖数据，显示导入数据的起始期数、终止期数和预测期数（终止期数+1期）。

2. **多周期数据分析**：对5期、10期、20期的数据进行分析，识别热号、渐热号和冷号。

3. **三维权重模型**：基于不同周期的数据分析结果，构建三维权重模型，为号码评估提供基础。

4. **共振模式识别**：识别四大共振模式（多头共振、趋势启动、物极必反、动能衰竭）。

5. **号码推荐**：根据共振模式识别结果，生成胆码、五码推荐池和七码推荐池。

6. **组合方案生成**：基于推荐的号码和预测的跨度，生成组选和直选的投注方案。

## 核心功能

### 1. 多周期数据分析

对不同周期的数据进行分析，识别热号、渐热号和冷号：

- **5期分析**：捕捉即时趋势
  - 热号：≥2次（动量）
  - 渐热号：1次（萌芽）
  - 冷号：0次（短期冷）

- **10期分析**：确认趋势稳定性
  - 热号：≥3次（趋势）
  - 渐热号：2次（延续）
  - 冷号：≤1次（中期冷）

- **20期分析**：概率回归压力
  - 热号：≥4次（强势）
  - 渐热号：3次（均衡）
  - 冷号：≤2次+遗漏≥15期

### 2. 共振模式识别

识别四大共振模式，为号码推荐提供依据：

- **多头共振**（推荐权重 ★★★★★）
  - 特征：5/10/20期均为热号
  - 策略：必选胆码

- **趋势启动**（推荐权重 ★★★★☆）
  - 特征：5期热、(10期渐热到热)、20期冷到渐热
  - 策略：重点跟进

- **物极必反**（推荐权重 ★★★★☆）
  - 特征：20期极冷 + (5期或10期出现)
  - 策略：高赔博弈

- **动能衰竭**（风险提示 ▲▲▲）
  - 特征：20期热但是5期冷
  - 策略：建议排除

### 3. 号码推荐

基于共振模式识别结果，生成不同层次的号码推荐：

- **胆码推荐**：最有可能出现的3个号码
  - 方案一：2个多头共振胆 + 1个趋势反转胆
  - 方案二：1个动能延续胆+趋势反转胆+多头共振胆

- **五码推荐池**：包含中奖号码的高概率数字集合（覆盖85%以上中奖概率）
  - 构建公式：2个核心胆码 + 2个强势动能码 + 1个极冷回补码

- **七码推荐池**：包含中奖号码的高概率数字集合（覆盖95%以上中奖概率）
  - 构建公式：2个核心胆码 + 3个强势动能码 + 2个不同属性的极冷码

### 4. 跨度和形态分析

- **跨度选择**：选择4个高概率的跨度
  - 热跨追号：统计20期内各跨度出现频率，选择出现≥3次的"热跨"
  - 对称补跨：如果近期跨度走势呈现对称，则按对称规律选择
  - 趋势延续跨：统计5期内各跨度出现频率，选择出现趋势属性的跨

- **形态选择**：预测组三/组六倾向
  - 追热形态：统计20期内组三、组六比例，跟随优势形态
  - 转折信号：连续出现6-7期组六后，开始关注组三回补
  - 多周期验证：检查热号中是否有对子号

### 5. 组合方案生成

基于推荐的号码和预测的跨度，生成不同类型的投注方案：

- **组选高胜率方案**：根据七码中的号码，利用预测的跨度进行组合（20注，按概率大小排序）

- **直选高胜率方案**：精确定位的直选组合（5-10注）

- **防守方案**：2胆全拖组选（成本最低）

## 技术实现

### 主要文件

1. **pages/resonance.html**：共振分析页面，实现完整工作流程和功能

2. **utils/resonanceUtils.js**：共振分析工具类，包含所有核心算法

### 核心函数

1. **analyzeResonance(historyData, numPeriods)**：共振分析主函数，对历史数据进行多周期分析和共振模式识别

2. **generateResonanceCombinations(resonanceResult)**：基于共振分析结果生成推荐号码组合

3. **highWinRateWorkflow(resonanceResult)**：综合高胜率工作流，生成完整的投注方案

4. **generateGroupSelections(numbers, spans, count)**：生成组选推荐

5. **generateDirectSelections(numbers, spans, positionAnalysis, count)**：生成直选推荐

## 使用方法

1. **数据准备**：首先在数据输入模块导入或输入历史开奖数据

2. **进入共振分析**：点击"共振分析"菜单或数据输入页面的"前往共振分析"按钮

3. **查看数据状态**：确认导入数据的起始期数、终止期数和预测期数

4. **开始分析**：点击"开始分析"按钮，系统将自动进行多周期分析、共振模式识别、号码推荐和组合方案生成

5. **查看分析结果**：在分析结果页面查看各周期的热号、渐热号和冷号，共振模式识别结果，号码推荐和组合方案

6. **选择投注方案**：根据分析结果选择合适的投注方案，或进入智能预测模块进行进一步的预测

## 注意事项

1. **数据质量**：共振分析的准确性依赖于历史数据的质量和数量，建议至少提供20期以上的历史数据

2. **周期选择**：系统默认使用20期数据进行分析，可以根据实际情况调整分析周期

3. **风险提示**：彩票预测具有不确定性，共振分析结果仅供参考，实际投注时请理性对待

4. **系统衔接**：共振分析模块的结果会自动传递给智能预测模块，供进一步分析使用

## 测试

提供了测试页面 `test-resonance-module.html`，可以用于测试共振分析模块的各项功能，包括：

1. 使用示例数据或自定义数据进行测试

2. 选择不同的分析周期

3. 查看详细的分析结果

4. 验证共振分析模块的正确性
